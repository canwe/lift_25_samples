/*! ghembedder - v0.1.0 - 2012-08-28
* https://github.com/kirbysayshi/ghembedder
* Copyright (c) 2012 Andrew Petersen; Licensed MIT */
(function(a){var b=a.base64={};b.PADCHAR="=",b.ALPHA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b.makeDOMException=function(){var a=new Error("DOM Exception 5");return a.code=a.number=5,a.name=a.description="INVALID_CHARACTER_ERR",a.toString=function(){return"Error: "+a.name+": "+a.message},a},b.getbyte64=function(a,c){var d=b.ALPHA.indexOf(a.charAt(c));if(d===-1)throw b.makeDOMException();return d},b.decode=function(a){a=""+a;var c=b.getbyte64,d,e,f,g=a.length;if(g===0)return a;if(g%4!==0)throw b.makeDOMException();d=0,a.charAt(g-1)===b.PADCHAR&&(d=1,a.charAt(g-2)===b.PADCHAR&&(d=2),g-=4);var h=[];for(e=0;e<g;e+=4)f=c(a,e)<<18|c(a,e+1)<<12|c(a,e+2)<<6|c(a,e+3),h.push(String.fromCharCode(f>>16,f>>8&255,f&255));switch(d){case 1:f=c(a,e)<<18|c(a,e+1)<<12|c(a,e+2)<<6,h.push(String.fromCharCode(f>>16,f>>8&255));break;case 2:f=c(a,e)<<18|c(a,e+1)<<12,h.push(String.fromCharCode(f>>16))}return h.join("")},b.getbyte=function(a,c){var d=a.charCodeAt(c);if(d>255)throw b.makeDOMException();return d},b.encode=function(a){if(arguments.length!==1)throw new SyntaxError("Not enough arguments");var c=b.PADCHAR,d=b.ALPHA,e=b.getbyte,f,g,h=[];a=""+a;var i=a.length-a.length%3;if(a.length===0)return a;for(f=0;f<i;f+=3)g=e(a,f)<<16|e(a,f+1)<<8|e(a,f+2),h.push(d.charAt(g>>18)),h.push(d.charAt(g>>12&63)),h.push(d.charAt(g>>6&63)),h.push(d.charAt(g&63));switch(a.length-i){case 1:g=e(a,f)<<16,h.push(d.charAt(g>>18)+d.charAt(g>>12&63)+c+c);break;case 2:g=e(a,f)<<16|e(a,f+1)<<8,h.push(d.charAt(g>>18)+d.charAt(g>>12&63)+d.charAt(g>>6&63)+c)}return h.join("")}})(window),window.btoa||(window.btoa=window.base64.encode),window.atob||(window.atob=window.base64.decode),function(a){var b=a.ghe={_apiBase:"https://api.github.com",_callbacks:{},_library:{},_rLeadSlash:/^\/+|\/+$/g,_rWhiteSpace:/\s/g};b._decodeContent=function(a){var c=window.atob(a.replace(b._rWhiteSpace,""));return c},b._keygen=function(){return"ghe_"+~~(Math.random()*1e5)},b._jsonpCallback=function(c){return b._callbacks[c]=function(d){var e=b._library[c],f=!1,g=e.lineBegin>-1&&e.lineEnd>-1,h,i,j,k=(new Array(e.tabSize+1)).join(" ");d.data&&d.data.content&&(e.data=d.data,h=b._decodeContent(d.data.content),e.fileName.match(/.*\.htm[l]*$/)&&(h=h.replace(/</g,"&lt;").replace(/>/g,"&gt;")),i=h.split("\n"),g&&(i=i.splice(e.lineBegin-1,e.lineEnd-e.lineBegin+1)),e.linenos&&(f=g?e.lineBegin:e.linenos),i=i.map(function(a,b){return'<a class="nocode" id="'+e.fileName+"-L"+(b+e.lineBegin)+'">'+(a?"":" ")+"</a>"+a.replace(/\t/gi,k)}),h=i.join("\n"),a.prettyPrintOne&&(h=a.prettyPrintOne(h,e.lang,f)),e.el.className+=" ghe",e.el.innerHTML='<pre class="prettyprint"><code>'+h+"</code></pre>"+(e.annotate?b._annotation(c):""))}},b._annotation=function(a){var c=b._library[a],d=c.lineBegin>-1&&c.lineEnd>-1;return'<div class="ghe-annotation">'+c.fileName+(d?", lines "+c.lineBegin+"-"+c.lineEnd:"")+(c.data?'. <a href="'+c.data._links.html+'" target="_blank">Source</a>':"")+"</div>"},b._jsonp=function(a,b){var c=document.createElement("script");c.async=!0,c.src=a+(a.indexOf("?")>-1?"&":"?")+"callback="+b,document.getElementsByTagName("head")[0].appendChild(c)},b._parseNode=function(a){var b=a.getAttribute("data-ghlines"),c=a.getAttribute("data-ghpath"),d,e;return b&&b.indexOf("-")>-1?(b=b.split("-"),d=parseInt(b[0],10),e=parseInt(b[1],10)):b?d=e=parseInt(b,10):d=e=-1,{path:c,userrepo:a.getAttribute("data-ghuserrepo"),ref:a.getAttribute("data-ghref")||"master",lineBegin:d,lineEnd:e,el:a,fileName:c.split("/").pop(),lang:a.getAttribute("data-ghlang"),linenos:a.getAttribute("data-ghlinenos"),annotate:a.getAttribute("data-ghannotate"),tabSize:parseInt(a.getAttribute("data-ghtabsize"),10)||4}},b.load=function(a){var c=b._keygen();a.nodeName&&(a=b._parseNode(a)),b._jsonpCallback(c),b._library[c]=a,b._jsonp(b._apiBase+"/repos/"+a.userrepo.replace(b._rLeadSlash,"")+"/contents/"+a.path.replace(b._rLeadSlash,"")+"?ref="+a.ref,"ghe._callbacks."+c)},b.autoload=function(){var a;window.jQuery?a=window.jQuery("[data-ghpath]"):a=document.querySelectorAll("[data-ghpath]");for(var c=0;c<a.length;c++)b.load(a[c])}}(typeof window=="object"&&window||this);